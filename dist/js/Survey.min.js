"use strict";class Survey{constructor(e,t,a){this.questions=[],this.options={},this.container=document.getElementById(e),this.container?(this.questions=t,a&&(this.options=a),this.render()):console.error("Could not find container element with ID "+e)}render(){const a=document.createElement("form");a.classList.add("surveyForm"),this.questions.forEach((e,t)=>{a.appendChild(this.createQuestion(e,t))});var e=document.createElement("input"),e=(e.type="submit",e.value="Submit",e.classList.add("btn"),e.classList.add("btn-primary"),a.appendChild(e),document.createElement("input"));e.type="button",e.value="Clear",e.classList.add("btn"),e.classList.add("btn-secondary"),e.addEventListener("click",()=>{a.reset()}),a.appendChild(e),this.container?.appendChild(a),a.addEventListener("submit",async e=>{e.preventDefault();e=this.getAnswers();if(console.log(e),this.options?.webhookUrl)try{var t=await fetch(this.options.webhookUrl,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});console.log("Webhook response:",await t.json())}catch(e){console.error("Webhook error:",e)}}),console.log(this.options.style),this.options?.style&&this.applyCSS(this.options.style)}createQuestion(a,n){const r=document.createElement("fieldset");var e=document.createElement("legend"),e=(e.textContent="Question "+(n+1),r.appendChild(e),document.createElement("label"));switch(e.classList.add("question-title"),e.textContent=a.text,a.required&&e.classList.add("required"),r.appendChild(e),a.type){case"text":case"email":case"tel":case"number":case"date":case"time":case"datetime-local":var t=this.createInputElement(a,"question-"+n);r.appendChild(t);break;case"radio":case"checkbox":a.answers?.forEach(e=>{var t=this.createInputElement(a,"question-"+n),t=(t.value=e,r.appendChild(t),document.createElement("label"));t.textContent=e,t.classList.add("form-check-label"),r.appendChild(t)});break;case"select":t=this.createSelectElement(a,"question-"+n);r.appendChild(t);break;case"textarea":t=this.createTextAreaElement(a,"question-"+n);r.appendChild(t)}return r}createInputElement(e,t){var a=document.createElement("input");return a.type=e.type,a.name=t,a.classList.add("checkbox"===e.type||"radio"===e.type?"form-check-input":"form-control"),e.required&&(a.required=!0),e.maxCharacters&&(a.maxLength=e.maxCharacters),e.placeholder&&(a.placeholder=e.placeholder),"number"===e.type&&(e.minValue&&(a.min=e.minValue.toString()),e.maxValue&&(a.max=e.maxValue.toString()),e.step)&&(a.step=e.step.toString()),a}createSelectElement(e,t){const a=document.createElement("select");return a.name=t,a.classList.add("form-control"),e.required&&(a.required=!0),e.multiple&&(a.multiple=!0),e.options?.forEach(e=>{var t=document.createElement("option");t.value=e.value,t.textContent=e.label,a.appendChild(t)}),a}createTextAreaElement(e,t){var a=document.createElement("textarea");return a.name=t,a.classList.add("form-control"),e.required&&(a.required=!0),e.maxCharacters&&(a.maxLength=e.maxCharacters),e.placeholder&&(a.placeholder=e.placeholder),a}getAnswers(){var e,t,a=this.container?.querySelector("form"),n={};for([e,t]of new FormData(a).entries())n[e]?n[e].push(t):n[e]=[t];return n}applyCSS(e){var t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("link");a.rel="stylesheet",a.href=`../dist/css/${e}.css`,t.appendChild(a)}}